"use strict";(self.webpackChunkhackathon_book=self.webpackChunkhackathon_book||[]).push([[982],{1313(n,e,r){r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1/python-agents","title":"Chapter 3: Python AI Agents, rclpy, and Humanoid Descriptions (URDF)","description":"Learning Objectives","source":"@site/docs/module-1/02-python-agents.md","sourceDirName":"module-1","slug":"/module-1/python-agents","permalink":"/hackathon-book/docs/module-1/python-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/anthropics/hackathon-book/tree/main/docs/module-1/02-python-agents.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: ROS 2 Communication","permalink":"/hackathon-book/docs/module-1/communication"},"next":{"title":"Module Overview","permalink":"/hackathon-book/docs/module-2/"}}');var s=r(4848),t=r(8453);const l={},o="Chapter 3: Python AI Agents, rclpy, and Humanoid Descriptions (URDF)",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Core Concepts: Introduction to rclpy",id:"core-concepts-introduction-to-rclpy",level:2},{value:"What is rclpy?",id:"what-is-rclpy",level:3},{value:"Installation and Setup",id:"installation-and-setup",level:3},{value:"Node Lifecycle in rclpy",id:"node-lifecycle-in-rclpy",level:3},{value:"Writing Publishers in Python",id:"writing-publishers-in-python",level:2},{value:"Publisher Basics",id:"publisher-basics",level:3},{value:"Example: Simple Joint State Publisher",id:"example-simple-joint-state-publisher",level:3},{value:"Writing Subscribers in Python",id:"writing-subscribers-in-python",level:2},{value:"Subscriber Basics",id:"subscriber-basics",level:3},{value:"Example: Simple Joint State Subscriber",id:"example-simple-joint-state-subscriber",level:3},{value:"Calling Services from Python",id:"calling-services-from-python",level:2},{value:"Service Client Basics",id:"service-client-basics",level:3},{value:"Example: Grasp Planning Service Client",id:"example-grasp-planning-service-client",level:3},{value:"Understanding URDF: Unified Robot Description Format",id:"understanding-urdf-unified-robot-description-format",level:2},{value:"What is URDF?",id:"what-is-urdf",level:3},{value:"URDF Structure: An Example",id:"urdf-structure-an-example",level:3},{value:"Key URDF Elements",id:"key-urdf-elements",level:3},{value:"Joint Types",id:"joint-types",level:3},{value:"Parsing URDF Files in Python",id:"parsing-urdf-files-in-python",level:2},{value:"URDF Parser Example",id:"urdf-parser-example",level:3},{value:"Building AI Agents for Humanoid Control",id:"building-ai-agents-for-humanoid-control",level:2},{value:"Architecture: Integrating URDF, ROS 2 Communication, and AI Planning",id:"architecture-integrating-urdf-ros-2-communication-and-ai-planning",level:3},{value:"Example: Simple Planning Agent Pseudocode",id:"example-simple-planning-agent-pseudocode",level:3},{value:"Summary",id:"summary",level:2},{value:"Review Questions",id:"review-questions",level:2},{value:"Code Examples Location",id:"code-examples-location",level:2},{value:"References",id:"references",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"chapter-3-python-ai-agents-rclpy-and-humanoid-descriptions-urdf",children:"Chapter 3: Python AI Agents, rclpy, and Humanoid Descriptions (URDF)"})}),"\n",(0,s.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Write functional ROS 2 nodes in Python"})," using rclpy, including publishers, subscribers, and service clients"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Design and execute publisher-subscriber patterns"})," for continuous sensor data and robot state"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Implement synchronous service calls"})," for query and action requests"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Understand URDF (Unified Robot Description Format)"})," XML structure and robot kinematic chains"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Parse URDF files programmatically"})," to extract link hierarchies, joint limits, and inertia properties"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Integrate Python AI planning logic with ROS 2 communication"})," to create autonomous humanoid agents"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Handle real-world challenges"})," in ROS 2 Python programming (timeouts, exceptions, resource cleanup)"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"core-concepts-introduction-to-rclpy",children:"Core Concepts: Introduction to rclpy"}),"\n",(0,s.jsx)(e.h3,{id:"what-is-rclpy",children:"What is rclpy?"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"rclpy"})," (ROS 2 Client Library for Python) is the official Python interface to ROS 2. It enables Python developers to:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Create nodes that participate in the ROS 2 graph"}),"\n",(0,s.jsx)(e.li,{children:"Publish and subscribe to topics"}),"\n",(0,s.jsx)(e.li,{children:"Call and provide services"}),"\n",(0,s.jsx)(e.li,{children:"Define and execute actions"}),"\n",(0,s.jsx)(e.li,{children:"Access ROS 2 parameters and timers"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"rclpy abstracts the underlying ROS 2 middleware (DDS) and provides a Pythonic API."}),"\n",(0,s.jsx)(e.h3,{id:"installation-and-setup",children:"Installation and Setup"}),"\n",(0,s.jsx)(e.p,{children:"rclpy is automatically installed with a standard ROS 2 installation:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Verify rclpy is available\r\npython3 -c "import rclpy; print(rclpy.__version__)"\r\n\r\n# Source your ROS 2 environment\r\nsource /opt/ros/humble/setup.bash\n'})}),"\n",(0,s.jsx)(e.h3,{id:"node-lifecycle-in-rclpy",children:"Node Lifecycle in rclpy"}),"\n",(0,s.jsx)(e.p,{children:"Every rclpy node follows this pattern:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MyNode(Node):\r\n    def __init__(self):\r\n        super().__init__('node_name')\r\n        # Initialize publishers, subscribers, timers here\r\n\r\n    def some_method(self):\r\n        # Your logic here\r\n        pass\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)                    # Initialize ROS 2\r\n    node = MyNode()                          # Create node\r\n    rclpy.spin(node)                         # Event loop: listen for messages\r\n    node.destroy_node()                      # Cleanup\r\n    rclpy.shutdown()                         # Shutdown ROS 2\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"writing-publishers-in-python",children:"Writing Publishers in Python"}),"\n",(0,s.jsx)(e.h3,{id:"publisher-basics",children:"Publisher Basics"}),"\n",(0,s.jsxs)(e.p,{children:["A ",(0,s.jsx)(e.strong,{children:"publisher"})," sends messages to a topic. Other nodes can subscribe and receive copies of those messages."]}),"\n",(0,s.jsx)(e.h3,{id:"example-simple-joint-state-publisher",children:"Example: Simple Joint State Publisher"}),"\n",(0,s.jsx)(e.p,{children:"Let's create a publisher that broadcasts joint state information for a 6-DOF robotic arm:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nROS 2 Publisher Example: Joint State Publisher\r\nContinuously publishes joint state information (positions, velocities, efforts).\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nimport math\r\n\r\n\r\nclass JointStatePublisher(Node):\r\n    \"\"\"Node that publishes joint state information.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('joint_state_publisher')\r\n\r\n        # Create a publisher for joint states\r\n        # Arguments:\r\n        #   1. Message type: JointState\r\n        #   2. Topic name: '/robot/joint_states'\r\n        #   3. Queue size: 10 (buffer up to 10 messages)\r\n        self.publisher_ = self.create_publisher(\r\n            JointState,\r\n            '/robot/joint_states',\r\n            qos_profile=10)\r\n\r\n        # Timer: call callback every 0.1 seconds (10 Hz)\r\n        timer_period = 0.1\r\n        self.timer = self.create_timer(timer_period, self.publish_joint_states)\r\n\r\n        self.simulation_time = 0.0\r\n        self.get_logger().info('Joint State Publisher started')\r\n\r\n    def publish_joint_states(self):\r\n        \"\"\"Callback: Publish joint state every 0.1 seconds.\"\"\"\r\n\r\n        # Create a JointState message\r\n        msg = JointState()\r\n\r\n        # Set header (timestamp and frame reference)\r\n        msg.header.stamp = self.get_clock().now().to_msg()\r\n        msg.header.frame_id = 'robot_base'\r\n\r\n        # Define joint names\r\n        msg.name = [\r\n            'shoulder_pan_joint',\r\n            'shoulder_lift_joint',\r\n            'elbow_flex_joint',\r\n            'wrist_1_joint',\r\n            'wrist_2_joint',\r\n            'wrist_3_joint'\r\n        ]\r\n\r\n        # Simulate joint positions with sinusoidal motion\r\n        msg.position = [\r\n            math.sin(self.simulation_time) * 1.57,\r\n            0.785 + 0.5 * math.cos(self.simulation_time),\r\n            -1.57 + 0.3 * math.sin(self.simulation_time),\r\n            math.cos(self.simulation_time) * 0.5,\r\n            0.0,\r\n            0.0\r\n        ]\r\n\r\n        # Calculate velocities (derivative of position)\r\n        msg.velocity = [\r\n            math.cos(self.simulation_time) * 1.57,\r\n            -0.5 * math.sin(self.simulation_time),\r\n            0.3 * math.cos(self.simulation_time),\r\n            -math.sin(self.simulation_time) * 0.5,\r\n            0.0,\r\n            0.0\r\n        ]\r\n\r\n        # Simulate joint efforts (torques)\r\n        msg.effort = [50.0, 75.0, 30.0, 5.0, 5.0, 5.0]\r\n\r\n        # Publish the message\r\n        self.publisher_.publish(msg)\r\n\r\n        # Log periodically\r\n        if int(self.simulation_time * 10) % 10 == 0:\r\n            self.get_logger().info(\r\n                f'Published {len(msg.name)} joint states')\r\n\r\n        self.simulation_time += 0.1\r\n\r\n\r\ndef main(args=None):\r\n    \"\"\"Main entry point.\"\"\"\r\n    rclpy.init(args=args)\r\n    node = JointStatePublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Key concepts"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"create_publisher()"})," registers the publisher on the topic"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"create_timer()"})," calls a callback function at regular intervals"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"get_clock().now().to_msg()"})," gets the current timestamp in ROS time"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"publisher_.publish(msg)"})," sends the message"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"To run this example"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 run <package> 02-python-agents.py\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"writing-subscribers-in-python",children:"Writing Subscribers in Python"}),"\n",(0,s.jsx)(e.h3,{id:"subscriber-basics",children:"Subscriber Basics"}),"\n",(0,s.jsxs)(e.p,{children:["A ",(0,s.jsx)(e.strong,{children:"subscriber"})," receives messages from a topic. When a message arrives, a callback function is invoked."]}),"\n",(0,s.jsx)(e.h3,{id:"example-simple-joint-state-subscriber",children:"Example: Simple Joint State Subscriber"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nROS 2 Subscriber Example\r\nSubscribes to /robot/joint_states and processes messages.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\n\r\n\r\nclass JointStateSubscriber(Node):\r\n    """Node that subscribes to joint state messages."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'joint_state_subscriber\')\r\n\r\n        # Create a subscription\r\n        # Arguments:\r\n        #   1. Message type: JointState\r\n        #   2. Topic name: \'/robot/joint_states\'\r\n        #   3. Callback function: called when message arrives\r\n        #   4. Queue size: 10\r\n        self.subscription = self.create_subscription(\r\n            JointState,\r\n            \'/robot/joint_states\',\r\n            self.listener_callback,\r\n            10\r\n        )\r\n\r\n        self.get_logger().info(\'Joint State Subscriber started\')\r\n\r\n    def listener_callback(self, msg: JointState):\r\n        """Callback: Process received joint state message."""\r\n\r\n        self.get_logger().info(\r\n            f\'Received joint state for {len(msg.name)} joints:\\n\'\r\n            f\'  Joints: {msg.name}\\n\'\r\n            f\'  Positions (rad): {[round(p, 3) for p in msg.position]}\\n\'\r\n            f\'  Velocities (rad/s): {[round(v, 3) for v in msg.velocity]}\'\r\n        )\r\n\r\n        # Example: Detect abnormal joint velocities\r\n        for name, velocity in zip(msg.name, msg.velocity):\r\n            if abs(velocity) > 2.0:  # Warning threshold\r\n                self.get_logger().warn(\r\n                    f\'Joint {name} has high velocity: {velocity} rad/s\')\r\n\r\n\r\ndef main(args=None):\r\n    """Main entry point."""\r\n    rclpy.init(args=args)\r\n    node = JointStateSubscriber()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Key concepts"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"create_subscription()"})," registers the subscriber on the topic"]}),"\n",(0,s.jsxs)(e.li,{children:["The callback function is called ",(0,s.jsx)(e.strong,{children:"asynchronously"})," when messages arrive"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"rclpy.spin()"})," blocks and processes messages until interrupted"]}),"\n",(0,s.jsx)(e.li,{children:"Subscribers can process messages at their own pace; messages are queued"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"To run"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# In one terminal (publisher)\r\nros2 run <package> 02-python-agents.py\r\n\r\n# In another terminal (subscriber)\r\nros2 run <package> 02-python-agents.py\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"calling-services-from-python",children:"Calling Services from Python"}),"\n",(0,s.jsx)(e.h3,{id:"service-client-basics",children:"Service Client Basics"}),"\n",(0,s.jsxs)(e.p,{children:["A ",(0,s.jsx)(e.strong,{children:"service client"})," sends a request to a service and waits for a response. Unlike pub-sub, this is synchronous."]}),"\n",(0,s.jsx)(e.h3,{id:"example-grasp-planning-service-client",children:"Example: Grasp Planning Service Client"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nROS 2 Service Client Example\r\nCalls a grasp planning service to request a grasp trajectory.\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Pose\r\n\r\n\r\nclass GraspClient(Node):\r\n    """Node that calls the grasp planning service."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'grasp_client\')\r\n        self.get_logger().info(\'Grasp Client initialized\')\r\n\r\n    def call_grasp_service(self, target_pose):\r\n        """\r\n        Call the grasp planning service.\r\n\r\n        In a real system, the service interface might be:\r\n\r\n        geometry_msgs/PoseStamped target_pose\r\n        string gripper_type\r\n        ---\r\n        bool success\r\n        trajectory_msgs/JointTrajectory trajectory\r\n        float32 execution_time_sec\r\n        """\r\n\r\n        self.get_logger().info(\r\n            f\'Requesting grasp at position: \'\r\n            f\'({target_pose.position.x:.2f}, \'\r\n            f\'{target_pose.position.y:.2f}, \'\r\n            f\'{target_pose.position.z:.2f})\'\r\n        )\r\n\r\n        # In a real implementation:\r\n        # 1. Create a service client:\r\n        #    self.cli = self.create_client(GraspPlan, \'/grasp_object\')\r\n        #\r\n        # 2. Wait for service availability:\r\n        #    while not self.cli.wait_for_service(timeout_sec=1.0):\r\n        #        self.get_logger().info(\'Service not available, waiting...\')\r\n        #\r\n        # 3. Create request and send:\r\n        #    req = GraspPlan.Request()\r\n        #    req.target_pose = target_pose\r\n        #    req.gripper_type = \'parallel_gripper\'\r\n        #    future = self.cli.call_async(req)\r\n        #    rclpy.spin_until_future_complete(self, future)\r\n        #    response = future.result()\r\n\r\n\r\ndef main(args=None):\r\n    """Main entry point."""\r\n    rclpy.init(args=args)\r\n    node = GraspClient()\r\n\r\n    # Create a target pose (example)\r\n    target = Pose()\r\n    target.position.x = 0.5\r\n    target.position.y = 0.3\r\n    target.position.z = 0.8\r\n    target.orientation.w = 1.0  # identity quaternion\r\n\r\n    node.call_grasp_service(target)\r\n\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Key concepts"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"create_client()"})," creates a service client"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"wait_for_service()"})," blocks until the service is available"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"call_async()"})," sends the request asynchronously"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"rclpy.spin_until_future_complete()"})," waits for the response"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"understanding-urdf-unified-robot-description-format",children:"Understanding URDF: Unified Robot Description Format"}),"\n",(0,s.jsx)(e.h3,{id:"what-is-urdf",children:"What is URDF?"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"URDF"})," is an XML format that describes a robot's structure:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Links"}),": Rigid bodies with mass and geometry"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Joints"}),": Connections between links with motion constraints"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Inertia"}),": Mass distribution properties for dynamics simulation"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"urdf-structure-an-example",children:"URDF Structure: An Example"}),"\n",(0,s.jsx)(e.p,{children:"Here's a simplified URDF for a humanoid robot:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="simple_humanoid">\r\n\r\n  \x3c!-- Base link (torso) --\x3e\r\n  <link name="base_link">\r\n    <inertial>\r\n      <mass value="10.0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Head link --\x3e\r\n  <link name="head">\r\n    <inertial>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Joint connecting torso to head --\x3e\r\n  <joint name="head_joint" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="head"/>\r\n    <axis xyz="0 0 1"/>\r\n    \x3c!-- Joint angle limits: -90\xb0 to +90\xb0 (in radians) --\x3e\r\n    <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>\r\n  </joint>\r\n\r\n  \x3c!-- Left shoulder --\x3e\r\n  <link name="left_shoulder">\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.005"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Left shoulder joint --\x3e\r\n  <joint name="left_shoulder_pitch" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="left_shoulder"/>\r\n    <axis xyz="1 0 0"/>\r\n    <limit lower="-1.57" upper="1.57" effort="30" velocity="1"/>\r\n  </joint>\r\n\r\n  \x3c!-- ... more links and joints ... --\x3e\r\n\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"key-urdf-elements",children:"Key URDF Elements"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Element"}),(0,s.jsx)(e.th,{children:"Purpose"}),(0,s.jsx)(e.th,{children:"Example"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<robot>"})}),(0,s.jsx)(e.td,{children:"Root element; names the robot"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<robot name="humanoid">'})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<link>"})}),(0,s.jsx)(e.td,{children:"Defines a rigid body"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<link name="left_arm">'})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<joint>"})}),(0,s.jsx)(e.td,{children:"Connects two links"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<joint name="elbow" type="revolute">'})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<parent link="...">'})}),(0,s.jsx)(e.td,{children:"Parent link of the joint"}),(0,s.jsx)(e.td,{children:"Links robot to base_link"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<child link="...">'})}),(0,s.jsx)(e.td,{children:"Child link (moved by joint)"}),(0,s.jsx)(e.td,{children:'link="hand"'})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:'<axis xyz="...">'})}),(0,s.jsx)(e.td,{children:"Rotation axis for revolute joints"}),(0,s.jsx)(e.td,{children:'xyz="1 0 0" (x-axis)'})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<limit>"})}),(0,s.jsx)(e.td,{children:"Joint motion constraints"}),(0,s.jsx)(e.td,{children:"lower, upper, effort, velocity"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<inertial>"})}),(0,s.jsx)(e.td,{children:"Mass and inertia properties"}),(0,s.jsx)(e.td,{children:"For dynamics simulation"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<mass>"})}),(0,s.jsx)(e.td,{children:"Link mass in kg"}),(0,s.jsx)(e.td,{children:'value="2.5"'})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<inertia>"})}),(0,s.jsx)(e.td,{children:"Inertia tensor (moment of inertia)"}),(0,s.jsx)(e.td,{children:"6 values: ixx, ixy, ixz, iyy, iyz, izz"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"joint-types",children:"Joint Types"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"revolute"}),": Rotational joint with limited range (e.g., elbow)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"continuous"}),": Unlimited rotation (e.g., wheel)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"prismatic"}),": Linear sliding motion (e.g., door on track)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"fixed"}),": No motion; locks two links together"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"parsing-urdf-files-in-python",children:"Parsing URDF Files in Python"}),"\n",(0,s.jsx)(e.h3,{id:"urdf-parser-example",children:"URDF Parser Example"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nSimple URDF Parser: Extract robot structure from XML.\r\n"""\r\n\r\nimport xml.etree.ElementTree as ET\r\n\r\n\r\nclass URDFParser:\r\n    """Parse and analyze URDF files."""\r\n\r\n    def __init__(self, urdf_file_path):\r\n        """Initialize parser with URDF file path."""\r\n        self.urdf_file = urdf_file_path\r\n        self.tree = ET.parse(urdf_file_path)\r\n        self.root = self.tree.getroot()\r\n        self.robot_name = self.root.get(\'name\', \'unknown\')\r\n\r\n    def get_links(self):\r\n        """Extract all links from the URDF."""\r\n        links = []\r\n        for link in self.root.findall(\'link\'):\r\n            link_name = link.get(\'name\')\r\n            links.append(link_name)\r\n        return links\r\n\r\n    def get_joints(self):\r\n        """Extract all joints and their properties."""\r\n        joints = []\r\n        for joint in self.root.findall(\'joint\'):\r\n            joint_name = joint.get(\'name\')\r\n            joint_type = joint.get(\'type\')\r\n            parent = joint.find(\'parent\').get(\'link\')\r\n            child = joint.find(\'child\').get(\'link\')\r\n\r\n            # Extract joint limits\r\n            limit = joint.find(\'limit\')\r\n            lower = float(limit.get(\'lower\', 0)) if limit is not None else 0\r\n            upper = float(limit.get(\'upper\', 0)) if limit is not None else 0\r\n\r\n            joints.append({\r\n                \'name\': joint_name,\r\n                \'type\': joint_type,\r\n                \'parent\': parent,\r\n                \'child\': child,\r\n                \'lower_limit\': lower,\r\n                \'upper_limit\': upper\r\n            })\r\n        return joints\r\n\r\n    def print_structure(self):\r\n        """Print the robot structure."""\r\n        print(f"Robot: {self.robot_name}\\n")\r\n\r\n        links = self.get_links()\r\n        print(f"Links ({len(links)}):")\r\n        for link in links:\r\n            print(f"  - {link}")\r\n\r\n        joints = self.get_joints()\r\n        print(f"\\nJoints ({len(joints)}):")\r\n        for joint in joints:\r\n            print(f"  - {joint[\'name\']} ({joint[\'type\']})")\r\n            print(f"    {joint[\'parent\']} \u2192 {joint[\'child\']}")\r\n            print(f"    Range: [{joint[\'lower_limit\']:.2f}, {joint[\'upper_limit\']:.2f}] rad")\r\n\r\n\r\ndef main():\r\n    """Main function."""\r\n    urdf_file = \'docs/module-1/code-examples/02-humanoid-example.urdf\'\r\n\r\n    try:\r\n        parser = URDFParser(urdf_file)\r\n        parser.print_structure()\r\n    except FileNotFoundError:\r\n        print(f"Error: URDF file \'{urdf_file}\' not found.")\r\n    except ET.ParseError as e:\r\n        print(f"Error parsing URDF: {e}")\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Output"})," (for the humanoid example):"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Robot: simple_humanoid\r\n\r\nLinks (13):\r\n  - base_link\r\n  - head\r\n  - left_shoulder\r\n  - left_elbow\r\n  - left_hand\r\n  - right_shoulder\r\n  - right_elbow\r\n  - right_hand\r\n  - left_hip\r\n  - left_knee\r\n  - left_foot\r\n  - right_hip\r\n  - right_knee\r\n  - right_foot\r\n\r\nJoints (12):\r\n  - head_joint (revolute)\r\n    base_link \u2192 head\r\n    Range: [-1.57, 1.57] rad\r\n  - left_shoulder_pitch (revolute)\r\n    base_link \u2192 left_shoulder\r\n    Range: [-1.57, 1.57] rad\r\n  ... (more joints)\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"building-ai-agents-for-humanoid-control",children:"Building AI Agents for Humanoid Control"}),"\n",(0,s.jsx)(e.h3,{id:"architecture-integrating-urdf-ros-2-communication-and-ai-planning",children:"Architecture: Integrating URDF, ROS 2 Communication, and AI Planning"}),"\n",(0,s.jsx)(e.p,{children:"A complete AI agent for humanoid control integrates three components:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                    AI Planning Agent Node                     \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502                                                                \u2502\r\n\u2502  1. Robot Model (URDF):                                      \u2502\r\n\u2502     \u251c\u2500 Load URDF file                                        \u2502\r\n\u2502     \u251c\u2500 Extract link hierarchy and joint limits              \u2502\r\n\u2502     \u2514\u2500 Build kinematic chain for IK calculations             \u2502\r\n\u2502                                                                \u2502\r\n\u2502  2. Perception Subscriber:                                   \u2502\r\n\u2502     \u251c\u2500 Subscribe to /robot/perception/obstacles             \u2502\r\n\u2502     \u251c\u2500 Subscribe to /robot/camera/rgb/image_raw            \u2502\r\n\u2502     \u2514\u2500 Build world model (object positions, obstacles)       \u2502\r\n\u2502                                                                \u2502\r\n\u2502  3. Planning Logic:                                          \u2502\r\n\u2502     \u251c\u2500 Inverse kinematics (URDF \u2192 joint angles)             \u2502\r\n\u2502     \u251c\u2500 Collision checking (URDF + world model)             \u2502\r\n\u2502     \u2514\u2500 Trajectory generation                                \u2502\r\n\u2502                                                                \u2502\r\n\u2502  4. Action Publisher:                                        \u2502\r\n\u2502     \u2514\u2500 Publish /robot/planning/trajectory                   \u2502\r\n\u2502                                                                \u2502\r\n\u2502  5. Service Clients:                                         \u2502\r\n\u2502     \u251c\u2500 Call /grasp_planner (if object is graspable)         \u2502\r\n\u2502     \u2514\u2500 Call /safety_check (verify trajectory)               \u2502\r\n\u2502                                                                \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"example-simple-planning-agent-pseudocode",children:"Example: Simple Planning Agent Pseudocode"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nExample: AI Planning Agent for Humanoid Robot.\r\n\r\nThis agent:\r\n1. Reads robot description (URDF)\r\n2. Subscribes to perception (obstacles, objects)\r\n3. Plans grasp trajectory using kinematics\r\n4. Publishes planned trajectory\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom geometry_msgs.msg import PoseStamped, Twist\r\nimport xml.etree.ElementTree as ET\r\n\r\n\r\nclass PlanningAgent(Node):\r\n    """AI agent for humanoid manipulation tasks."""\r\n\r\n    def __init__(self, urdf_file):\r\n        super().__init__(\'planning_agent\')\r\n\r\n        # Load robot model from URDF\r\n        self.robot_urdf = URDFParser(urdf_file)\r\n        self.get_logger().info(\r\n            f\'Loaded robot: {self.robot_urdf.robot_name} \'\r\n            f\'with {len(self.robot_urdf.get_joints())} joints\')\r\n\r\n        # Subscribe to perception data\r\n        self.object_subscriber = self.create_subscription(\r\n            PoseStamped,\r\n            \'/robot/perception/detected_objects\',\r\n            self.on_object_detected,\r\n            10\r\n        )\r\n\r\n        # Subscribe to joint state feedback\r\n        self.joint_state_subscriber = self.create_subscription(\r\n            JointState,\r\n            \'/robot/arm/joint_states\',\r\n            self.on_joint_state,\r\n            10\r\n        )\r\n\r\n        # Publisher for planned trajectory\r\n        self.trajectory_publisher = self.create_publisher(\r\n            Twist,  # In real system: trajectory_msgs/JointTrajectory\r\n            \'/robot/planning/trajectory\',\r\n            10\r\n        )\r\n\r\n        # State tracking\r\n        self.current_joint_state = None\r\n        self.detected_objects = []\r\n\r\n    def on_object_detected(self, msg: PoseStamped):\r\n        """Callback: New object detected by perception system."""\r\n        self.get_logger().info(\r\n            f\'Detected object at ({msg.pose.position.x:.2f}, \'\r\n            f\'{msg.pose.position.y:.2f}, \'\r\n            f\'{msg.pose.position.z:.2f})\')\r\n\r\n        self.detected_objects.append(msg)\r\n\r\n        # Trigger planning\r\n        self.plan_grasp(msg.pose)\r\n\r\n    def on_joint_state(self, msg: JointState):\r\n        """Callback: Update current joint state."""\r\n        self.current_joint_state = msg\r\n\r\n    def plan_grasp(self, target_pose):\r\n        """\r\n        Plan a grasp trajectory to the target pose.\r\n\r\n        Steps:\r\n        1. Inverse kinematics: target_pose \u2192 joint angles\r\n        2. Collision checking: verify trajectory doesn\'t hit obstacles\r\n        3. Generate trajectory: smooth path from current to target\r\n        4. Publish trajectory\r\n        """\r\n\r\n        if self.current_joint_state is None:\r\n            self.get_logger().warn(\'No joint state available yet\')\r\n            return\r\n\r\n        # Step 1: Inverse Kinematics\r\n        target_joint_angles = self.inverse_kinematics(target_pose)\r\n        if target_joint_angles is None:\r\n            self.get_logger().error(\'IK solution not found\')\r\n            return\r\n\r\n        # Step 2: Collision Check\r\n        if not self.check_collision_free(target_joint_angles):\r\n            self.get_logger().warn(\'Collision detected in planned trajectory\')\r\n            return\r\n\r\n        # Step 3: Trajectory Generation\r\n        trajectory = self.generate_trajectory(\r\n            self.current_joint_state.position,\r\n            target_joint_angles)\r\n\r\n        # Step 4: Publish Trajectory\r\n        msg = Twist()  # In real system: JointTrajectory message\r\n        self.trajectory_publisher.publish(msg)\r\n        self.get_logger().info(\'Trajectory published\')\r\n\r\n    def inverse_kinematics(self, target_pose):\r\n        """\r\n        Solve inverse kinematics: target end-effector pose \u2192 joint angles.\r\n\r\n        In a real implementation, you would use:\r\n        - KDL (Kinematics and Dynamics Library)\r\n        - PyBullet\r\n        - Drake (from Toyota Research Institute)\r\n        """\r\n        # Placeholder: return dummy joint angles\r\n        joints = self.robot_urdf.get_joints()\r\n        return [0.0] * len(joints)\r\n\r\n    def check_collision_free(self, joint_angles):\r\n        """\r\n        Verify trajectory is collision-free.\r\n\r\n        Uses URDF link geometry to check for self-collisions\r\n        and collisions with perceived obstacles.\r\n        """\r\n        # Placeholder: always return True\r\n        return True\r\n\r\n    def generate_trajectory(self, current_angles, target_angles):\r\n        """Generate a smooth trajectory using linear interpolation."""\r\n        # Placeholder: return straight-line trajectory\r\n        steps = 10\r\n        trajectory = []\r\n        for i in range(steps):\r\n            t = i / (steps - 1)\r\n            angles = [\r\n                current + t * (target - current)\r\n                for current, target in zip(current_angles, target_angles)\r\n            ]\r\n            trajectory.append(angles)\r\n        return trajectory\r\n\r\n\r\nclass URDFParser:\r\n    """Simplified URDF parser."""\r\n    def __init__(self, urdf_file):\r\n        self.tree = ET.parse(urdf_file)\r\n        self.root = self.tree.getroot()\r\n        self.robot_name = self.root.get(\'name\')\r\n\r\n    def get_joints(self):\r\n        return self.root.findall(\'joint\')\r\n\r\n\r\ndef main(args=None):\r\n    """Main entry point."""\r\n    rclpy.init(args=args)\r\n\r\n    urdf_file = \'docs/module-1/code-examples/02-humanoid-example.urdf\'\r\n    agent = PlanningAgent(urdf_file)\r\n\r\n    try:\r\n        rclpy.spin(agent)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        agent.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Key insights"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["The agent combines ",(0,s.jsx)(e.strong,{children:"URDF knowledge"})," (kinematic chain), ",(0,s.jsx)(e.strong,{children:"perception"})," (detected objects), ",(0,s.jsx)(e.strong,{children:"planning"})," (IK, collision checking), and ",(0,s.jsx)(e.strong,{children:"ROS 2 communication"})," (pub-sub, services)"]}),"\n",(0,s.jsx)(e.li,{children:"This is a simplified example; real systems use libraries like KDL or PyBullet for kinematics"}),"\n",(0,s.jsx)(e.li,{children:"Error handling and timeouts are critical for robust autonomous systems"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(e.p,{children:"This chapter taught you how to write Python ROS 2 nodes and integrate them with robot descriptions:"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"rclpy Patterns"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Publishers broadcast continuous data to topics"}),"\n",(0,s.jsx)(e.li,{children:"Subscribers receive messages asynchronously"}),"\n",(0,s.jsx)(e.li,{children:"Service clients send requests and wait for responses"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"URDF and Robot Models"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"URDF files describe robot structure (links, joints, inertia)"}),"\n",(0,s.jsx)(e.li,{children:"Parse URDF with XML to extract kinematic chains"}),"\n",(0,s.jsx)(e.li,{children:"Use URDF in planning algorithms (IK, collision checking)"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"AI Agents for Humanoid Control"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Combine perception (subscribers), planning (logic), and action (publishers)"}),"\n",(0,s.jsx)(e.li,{children:"Use URDF for kinematic understanding"}),"\n",(0,s.jsx)(e.li,{children:"Handle failures gracefully with timeouts and error checking"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Next steps"}),": Deploy your agents on a real robot or simulator (Gazebo, MuJoCo) and test autonomous behavior."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"review-questions",children:"Review Questions"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"What are the three main components of an rclpy node, and how do they interact?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Explain the difference between a publisher that runs at 100 Hz and a subscriber that processes messages. How are they decoupled?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Write pseudocode to create a ROS 2 publisher that publishes camera images at 30 Hz. What message type would you use?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"What is the advantage of using service clients instead of topics for requesting a grasp plan?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Describe the structure of a URDF file. What are the four most important elements?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"A humanoid robot has 15 joints. How would you extract all joint names and their rotation axes from a URDF file using XML parsing?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["In the planning agent example, why is it important to check ",(0,s.jsx)(e.code,{children:"self.current_joint_state"})," before planning?"]})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:'What does "inverse kinematics" mean? Why is it needed to grasp an object at a target position?'})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Design an AI agent that:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Subscribes to perceived obstacles"}),"\n",(0,s.jsx)(e.li,{children:"Plans a collision-free path"}),"\n",(0,s.jsx)(e.li,{children:"Publishes the planned trajectory"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Describe the ROS 2 topics, message types, and node structure."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"A subscriber receives joint states at 100 Hz, but your collision checking algorithm runs at only 10 Hz. How would you handle this rate mismatch?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["Explain how URDF joint limits (e.g., ",(0,s.jsx)(e.code,{children:'<limit lower="-1.57" upper="1.57"/>'}),") constrain an IK solver."]})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"What errors might occur when calling a service? How would you handle timeouts in rclpy?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"A humanoid arm has 6 DOF (degrees of freedom). Describe how you would use URDF to verify that a target grasp pose is kinematically feasible."})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"What is the role of the header timestamp in JointState messages? Why is it important for multi-agent robots?"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Design a safety-aware planning agent that checks for collisions before publishing a trajectory. What safeguards would you implement?"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"code-examples-location",children:"Code Examples Location"}),"\n",(0,s.jsx)(e.p,{children:"All code examples referenced in this chapter are available in:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"01-publisher.py"})," \u2014 Simple joint state publisher"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"01-subscriber.py"})," \u2014 Simple joint state subscriber"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"01-service-client.py"})," \u2014 Grasp service client"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"02-humanoid-example.urdf"})," \u2014 Sample 12-joint humanoid robot"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"02-urdf-parser.py"})," \u2014 URDF parsing utility"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"To run these examples, ensure your ROS 2 environment is sourced and the package is properly set up."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.ros.org/en/humble/Packages/Development-tools/rclpy/index.html",children:"rclpy Documentation"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html",children:"ROS 2 Python Client Library Guide"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://wiki.ros.org/urdf/XML",children:"URDF XML Specification"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/orocos/orocos_kinematics_dynamics",children:"KDL: Kinematics and Dynamics Library"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/ros2/common_interfaces",children:"ROS 2 Message Types"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453(n,e,r){r.d(e,{R:()=>l,x:()=>o});var i=r(6540);const s={},t=i.createContext(s);function l(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);
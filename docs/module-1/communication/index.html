<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-1/communication" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 2: ROS 2 Communication — Nodes, Topics, and Services | The Robotic Nervous System: ROS 2 for Humanoid AI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tahirrasheed.github.io/hackathon-book/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tahirrasheed.github.io/hackathon-book/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tahirrasheed.github.io/hackathon-book/docs/module-1/communication"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ur"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 2: ROS 2 Communication — Nodes, Topics, and Services | The Robotic Nervous System: ROS 2 for Humanoid AI"><meta data-rh="true" name="description" content="Learning Objectives"><meta data-rh="true" property="og:description" content="Learning Objectives"><link data-rh="true" rel="icon" href="/hackathon-book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tahirrasheed.github.io/hackathon-book/docs/module-1/communication"><link data-rh="true" rel="alternate" href="https://tahirrasheed.github.io/hackathon-book/docs/module-1/communication" hreflang="en"><link data-rh="true" rel="alternate" href="https://tahirrasheed.github.io/hackathon-book/ur/docs/module-1/communication" hreflang="ur"><link data-rh="true" rel="alternate" href="https://tahirrasheed.github.io/hackathon-book/docs/module-1/communication" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 2: ROS 2 Communication","item":"https://tahirrasheed.github.io/hackathon-book/docs/module-1/communication"}]}</script><link rel="stylesheet" href="/hackathon-book/assets/css/styles.4c493b2a.css">
<script src="/hackathon-book/assets/js/runtime~main.542065df.js" defer="defer"></script>
<script src="/hackathon-book/assets/js/main.e5562e93.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/hackathon-book/"><div class="navbar__logo"><img src="/hackathon-book/img/logo.svg" alt="ROS 2 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/hackathon-book/img/logo.svg" alt="ROS 2 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ROS 2 Nervous System</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hackathon-book/docs/docs">Modules</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/hackathon-book/docs/module-1/communication" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/hackathon-book/ur/docs/module-1/communication" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ur">اردو</a></li></ul></div><a href="https://github.com/anthropics/hackathon-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/hackathon-book/docs/docs"><span title="Home" class="linkLabel_WmDU">Home</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--active"><span title="Module 1: The Robotic Nervous System" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-1/"><span title="Module Overview" class="linkLabel_WmDU">Module Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-1/intro"><span title="Chapter 1: Introduction to ROS 2" class="linkLabel_WmDU">Chapter 1: Introduction to ROS 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hackathon-book/docs/module-1/communication"><span title="Chapter 2: ROS 2 Communication" class="linkLabel_WmDU">Chapter 2: ROS 2 Communication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-1/python-agents"><span title="Chapter 3: Python AI Agents &amp; URDF" class="linkLabel_WmDU">Chapter 3: Python AI Agents &amp; URDF</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link"><span title="Module 2: The Digital Twin" class="categoryLinkLabel_W154">Module 2: The Digital Twin</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-2/"><span title="Module Overview" class="linkLabel_WmDU">Module Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-2/intro"><span title="Chapter 0: Philosophy &amp; Goals" class="linkLabel_WmDU">Chapter 0: Philosophy &amp; Goals</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-2/gazebo"><span title="Chapter 1: Physics with Gazebo" class="linkLabel_WmDU">Chapter 1: Physics with Gazebo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-2/unity"><span title="Chapter 2: Human-Robot Interaction in Unity" class="linkLabel_WmDU">Chapter 2: Human-Robot Interaction in Unity</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-2/sensors"><span title="Chapter 3: Sensors &amp; Sim-to-Real Gaps" class="linkLabel_WmDU">Chapter 3: Sensors &amp; Sim-to-Real Gaps</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link"><span title="Module 3: Humanoid Robot Architecture" class="categoryLinkLabel_W154">Module 3: Humanoid Robot Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/intro"><span title="Chapter 1: Introduction &amp; Learning Objectives" class="linkLabel_WmDU">Chapter 1: Introduction &amp; Learning Objectives</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/mechanical"><span title="Chapter 2: Mechanical Structure &amp; Kinematics" class="linkLabel_WmDU">Chapter 2: Mechanical Structure &amp; Kinematics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/sensors"><span title="Chapter 3: Sensors &amp; Proprioception" class="linkLabel_WmDU">Chapter 3: Sensors &amp; Proprioception</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/actuators"><span title="Chapter 4: Actuators &amp; Power" class="linkLabel_WmDU">Chapter 4: Actuators &amp; Power</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/compute"><span title="Chapter 5: Hardware Compute &amp; Real-Time OS" class="linkLabel_WmDU">Chapter 5: Hardware Compute &amp; Real-Time OS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/ros2"><span title="Chapter 6: ROS 2 Software Stack" class="linkLabel_WmDU">Chapter 6: ROS 2 Software Stack</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/safety"><span title="Chapter 7: Safety, Redundancy &amp; Integration" class="linkLabel_WmDU">Chapter 7: Safety, Redundancy &amp; Integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/case-study"><span title="Chapter 8: Boston Dynamics Atlas Case Study" class="linkLabel_WmDU">Chapter 8: Boston Dynamics Atlas Case Study</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hackathon-book/docs/module-3/summary"><span title="Chapter 9: Summary &amp; Review Questions" class="linkLabel_WmDU">Chapter 9: Summary &amp; Review Questions</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 1: The Robotic Nervous System</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 2: ROS 2 Communication</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 2: ROS 2 Communication — Nodes, Topics, and Services</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-objectives">Learning Objectives<a href="#learning-objectives" class="hash-link" aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate="no">​</a></h2>
<p>By the end of this chapter, you will be able to:</p>
<ol>
<li class=""><strong>Explain the role of nodes, topics, and services</strong> in ROS 2&#x27;s distributed communication architecture</li>
<li class=""><strong>Design communication topologies</strong> that connect perception, planning, and action subsystems in humanoid robots</li>
<li class=""><strong>Distinguish between topics (pub-sub) and services (request-reply)</strong> and apply each pattern appropriately</li>
<li class=""><strong>Trace message flow</strong> through multi-node systems to diagnose communication bottlenecks</li>
<li class=""><strong>Apply Quality-of-Service (QoS) policies</strong> to ensure reliable message delivery for time-critical robot control</li>
<li class=""><strong>Handle edge cases</strong> such as node failures, message delays, and multi-agent coordination conflicts</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="core-concepts">Core Concepts<a href="#core-concepts" class="hash-link" aria-label="Direct link to Core Concepts" title="Direct link to Core Concepts" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-node">What is a Node?<a href="#what-is-a-node" class="hash-link" aria-label="Direct link to What is a Node?" title="Direct link to What is a Node?" translate="no">​</a></h3>
<p>A <strong>ROS 2 node</strong> is an autonomous computational unit in the ROS 2 graph. Every node is a separate process (or thread) that:</p>
<ul>
<li class="">Runs continuously, processing data and making decisions</li>
<li class="">Communicates with other nodes via topics (publish-subscribe) and services (request-reply)</li>
<li class="">Has a unique name within the ROS 2 network (e.g., <code>/robot_controller</code>, <code>/obstacle_detector</code>)</li>
<li class="">Follows a standardized lifecycle: UNCONFIGURED → INACTIVE → ACTIVE → FINALIZED</li>
</ul>
<p><strong>Real-world analogy</strong>: In a humanoid robot&#x27;s nervous system, each node is like a specialized neural cluster—the perception cluster processes sensor data, the planning cluster reasons about actions, and the motor control cluster executes commands. These clusters communicate via standardized pathways (topics and services).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-namespaces-and-naming">Node Namespaces and Naming<a href="#node-namespaces-and-naming" class="hash-link" aria-label="Direct link to Node Namespaces and Naming" title="Direct link to Node Namespaces and Naming" translate="no">​</a></h3>
<p>ROS 2 uses <strong>namespaces</strong> to organize nodes hierarchically. For example:</p>
<ul>
<li class=""><code>/robot_1/arm_controller</code> — A specific controller in the robot_1 namespace</li>
<li class=""><code>/robot_1/perception/obstacle_detector</code> — Nested namespace for perception subsystems</li>
<li class=""><code>/robot_2/arm_controller</code>  — Same node name in a different robot&#x27;s namespace (multi-agent coordination)</li>
</ul>
<p><strong>Naming conventions</strong>:</p>
<ul>
<li class="">Use <code>snake_case</code> for node names (e.g., <code>joint_trajectory_controller</code>, <code>grasping_planner</code>)</li>
<li class="">Use hierarchical namespaces to group related nodes (e.g., <code>/robot/arm/</code>, <code>/robot/legs/</code>)</li>
<li class="">Avoid hardcoded node names; use configuration files to support dynamic deployment</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="node-lifecycle">Node Lifecycle<a href="#node-lifecycle" class="hash-link" aria-label="Direct link to Node Lifecycle" title="Direct link to Node Lifecycle" translate="no">​</a></h3>
<p>Every ROS 2 node transitions through four states:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UNCONFIGURED → INACTIVE → ACTIVE → FINALIZED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ↑                                    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     └────────────────────────────────────┘</span><br></span></code></pre></div></div>
<ul>
<li class=""><strong>UNCONFIGURED</strong>: Node initialized but not yet ready (resources not allocated)</li>
<li class=""><strong>INACTIVE</strong>: Node configured but paused (ready to activate on demand)</li>
<li class=""><strong>ACTIVE</strong>: Node running, publishing/subscribing, processing messages</li>
<li class=""><strong>FINALIZED</strong>: Node shut down, resources released</li>
</ul>
<p>This lifecycle ensures graceful startup and shutdown—critical for multi-node robot systems where components must be activated in dependency order.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="topics-and-publish-subscribe-pub-sub-communication">Topics and Publish-Subscribe (Pub-Sub) Communication<a href="#topics-and-publish-subscribe-pub-sub-communication" class="hash-link" aria-label="Direct link to Topics and Publish-Subscribe (Pub-Sub) Communication" title="Direct link to Topics and Publish-Subscribe (Pub-Sub) Communication" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-topic">What is a Topic?<a href="#what-is-a-topic" class="hash-link" aria-label="Direct link to What is a Topic?" title="Direct link to What is a Topic?" translate="no">​</a></h3>
<p>A <strong>topic</strong> is a named channel for <strong>asynchronous, one-way</strong> message distribution. Think of it as a bulletin board where:</p>
<ul>
<li class=""><strong>Publishers</strong> post messages to the topic</li>
<li class=""><strong>Subscribers</strong> listen and receive copies of those messages</li>
<li class="">Multiple publishers can write to the same topic</li>
<li class="">Multiple subscribers can read from the same topic</li>
<li class="">Publishers and subscribers don&#x27;t need to know about each other</li>
</ul>
<p><strong>Example</strong>: A humanoid robot&#x27;s joint position publisher continuously broadcasts the current angle of each joint. Any node interested in joint positions—the planner, the safety monitor, the data logger—can subscribe without the publisher knowing or caring.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pub-sub-communication-flow">Pub-Sub Communication Flow<a href="#pub-sub-communication-flow" class="hash-link" aria-label="Direct link to Pub-Sub Communication Flow" title="Direct link to Pub-Sub Communication Flow" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Publisher (e.g., Joint State Sensor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Topic: /robot/joint_states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↙      ↓      ↘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Planner  Monitor  Logger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (Subscriber 1) (Subscriber 2) (Subscriber 3)</span><br></span></code></pre></div></div>
<p><strong>Key advantages of pub-sub</strong>:</p>
<ul>
<li class=""><strong>Decoupling</strong>: Publishers and subscribers are independent; new subscribers can join at any time</li>
<li class=""><strong>Scalability</strong>: One publisher can serve many subscribers with minimal overhead</li>
<li class=""><strong>Asynchronous</strong>: Senders don&#x27;t wait for receivers to process; messages are queued</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="message-types-and-examples">Message Types and Examples<a href="#message-types-and-examples" class="hash-link" aria-label="Direct link to Message Types and Examples" title="Direct link to Message Types and Examples" translate="no">​</a></h3>
<p>ROS 2 defines standardized message types for common robotics tasks:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor_msgsjointstate"><strong>sensor_msgs/JointState</strong><a href="#sensor_msgsjointstate" class="hash-link" aria-label="Direct link to sensor_msgsjointstate" title="Direct link to sensor_msgsjointstate" translate="no">​</a></h4>
<p>Published by joint sensors or state estimators. Contains joint positions, velocities, and efforts.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">seq</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">stamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">sec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1702881234</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nsec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">567890123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frame_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;robot_base&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;shoulder_pan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;shoulder_lift&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;elbow_flex&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wrist_1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wrist_2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wrist_3&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">position</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.57</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1.57</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Radians</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">velocity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-0.08</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Rad/sec</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">effort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15.2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8.3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># Nm (Newton-meters)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="geometry_msgstwist"><strong>geometry_msgs/Twist</strong><a href="#geometry_msgstwist" class="hash-link" aria-label="Direct link to geometry_msgstwist" title="Direct link to geometry_msgstwist" translate="no">​</a></h4>
<p>Published by motion planners to specify desired robot velocities (linear and angular).</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Structure for mobile manipulation (e.g., Spot, HSR)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">linear</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Forward velocity (m/s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Strafe velocity (m/s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Vertical velocity (m/s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">angular</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Roll rate (rad/s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Pitch rate (rad/s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Yaw rate (rad/s)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor_msgsimage"><strong>sensor_msgs/Image</strong><a href="#sensor_msgsimage" class="hash-link" aria-label="Direct link to sensor_msgsimage" title="Direct link to sensor_msgsimage" translate="no">​</a></h4>
<p>Published by cameras. Contains pixel data, encoding, and metadata.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">seq</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">stamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">frame_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;camera_link&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">480</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">640</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">encoding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;rgb8&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">is_bigendian</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">step</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># Bytes per row</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># Raw pixel data</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="geometry_msgsposestamped"><strong>geometry_msgs/PoseStamped</strong><a href="#geometry_msgsposestamped" class="hash-link" aria-label="Direct link to geometry_msgsposestamped" title="Direct link to geometry_msgsposestamped" translate="no">​</a></h4>
<p>Published by perception systems to indicate detected object positions and orientations.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Structure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token key atrule" style="color:#00a4db">seq</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">stamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">frame_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;camera_optical_frame&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">pose</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">position</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Position in 3D space (meters)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">orientation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Quaternion (x, y, z, w)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.707</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">w</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.707</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="quality-of-service-qos-policies">Quality of Service (QoS) Policies<a href="#quality-of-service-qos-policies" class="hash-link" aria-label="Direct link to Quality of Service (QoS) Policies" title="Direct link to Quality of Service (QoS) Policies" translate="no">​</a></h3>
<p>ROS 2 allows publishers and subscribers to specify <strong>Quality-of-Service (QoS) policies</strong> that affect message delivery:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="reliability-policy"><strong>Reliability Policy</strong><a href="#reliability-policy" class="hash-link" aria-label="Direct link to reliability-policy" title="Direct link to reliability-policy" translate="no">​</a></h4>
<ul>
<li class=""><strong>RELIABLE</strong>: Every message is guaranteed to be delivered (may introduce latency)</li>
<li class=""><strong>BEST_EFFORT</strong>: Messages may be lost if the network is congested (lower latency)</li>
</ul>
<p><strong>When to use</strong>:</p>
<ul>
<li class="">RELIABLE: Critical messages (grasp commands, emergency stop)</li>
<li class="">BEST_EFFORT: High-frequency sensor data (camera frames, IMU readings)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="durability-policy"><strong>Durability Policy</strong><a href="#durability-policy" class="hash-link" aria-label="Direct link to durability-policy" title="Direct link to durability-policy" translate="no">​</a></h4>
<ul>
<li class=""><strong>VOLATILE</strong>: Messages only available to current subscribers</li>
<li class=""><strong>TRANSIENT_LOCAL</strong>: New subscribers receive the last message (useful for configuration data)</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Publish robot configuration with TRANSIENT_LOCAL QoS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qos_policy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reliability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RELIABLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        durability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TRANSIENT_LOCAL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config_publisher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RobotConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/robot/config&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_policy</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="history-policy"><strong>History Policy</strong><a href="#history-policy" class="hash-link" aria-label="Direct link to history-policy" title="Direct link to history-policy" translate="no">​</a></h4>
<ul>
<li class=""><strong>KEEP_LAST(n)</strong>: Store only the last n messages (default: n=1)</li>
<li class=""><strong>KEEP_ALL</strong>: Store all messages until consumed</li>
</ul>
<p><strong>Trade-off</strong>: KEEP_ALL uses more memory but ensures no message loss; KEEP_LAST is memory-efficient but may drop old messages if subscribers are slow.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="topic-naming-conventions">Topic Naming Conventions<a href="#topic-naming-conventions" class="hash-link" aria-label="Direct link to Topic Naming Conventions" title="Direct link to Topic Naming Conventions" translate="no">​</a></h3>
<p>Standardize your topic names for clarity and to avoid conflicts:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/robot/&lt;component&gt;/&lt;data_type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Examples:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/arm/joint_states          # Joint positions/velocities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/gripper/command           # Gripper open/close signal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/camera/rgb/image_raw      # Camera RGB stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/imu/data                  # IMU acceleration and rotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/navigation/goal           # Navigation target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/robot/safety/emergency_stop     # Critical safety signal</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="services-and-request-reply-communication">Services and Request-Reply Communication<a href="#services-and-request-reply-communication" class="hash-link" aria-label="Direct link to Services and Request-Reply Communication" title="Direct link to Services and Request-Reply Communication" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-service">What is a Service?<a href="#what-is-a-service" class="hash-link" aria-label="Direct link to What is a Service?" title="Direct link to What is a Service?" translate="no">​</a></h3>
<p>A <strong>service</strong> is a <strong>synchronous, request-reply</strong> mechanism. A client sends a request and waits for a response:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Client (e.g., Planning Node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (sends request)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Service Server (e.g., Grasp Planner)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓ (processes request)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↑ (sends response)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Client receives response</span><br></span></code></pre></div></div>
<p><strong>Key differences from pub-sub</strong>:</p>
<ul>
<li class=""><strong>Synchronous</strong>: Client blocks until the server responds</li>
<li class=""><strong>One-to-one</strong>: Each request goes to one specific server</li>
<li class=""><strong>Bidirectional</strong>: Information flows both ways</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-request-reply-patterns">Service Request-Reply Patterns<a href="#service-request-reply-patterns" class="hash-link" aria-label="Direct link to Service Request-Reply Patterns" title="Direct link to Service Request-Reply Patterns" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-1-query-information"><strong>Pattern 1: Query Information</strong><a href="#pattern-1-query-information" class="hash-link" aria-label="Direct link to pattern-1-query-information" title="Direct link to pattern-1-query-information" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Request: &quot;What is the current joint configuration?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Response: [0.0, 1.57, -1.57, 0.0, 0.0, 0.0]</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-2-perform-an-action"><strong>Pattern 2: Perform an Action</strong><a href="#pattern-2-perform-an-action" class="hash-link" aria-label="Direct link to pattern-2-perform-an-action" title="Direct link to pattern-2-perform-an-action" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Request: &quot;Plan a grasp at position (0.5, 0.2, 1.1) with orientation Q&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Response: { success: true, trajectory: [...], duration: 2.3 }</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-3-enabledisable-functionality"><strong>Pattern 3: Enable/Disable Functionality</strong><a href="#pattern-3-enabledisable-functionality" class="hash-link" aria-label="Direct link to pattern-3-enabledisable-functionality" title="Direct link to pattern-3-enabledisable-functionality" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Request: &quot;Enable collision avoidance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Response: { success: true, message: &quot;Collision avoidance enabled&quot; }</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-definition-example">Service Definition Example<a href="#service-definition-example" class="hash-link" aria-label="Direct link to Service Definition Example" title="Direct link to Service Definition Example" translate="no">​</a></h3>
<p>Services are defined in <code>.srv</code> files (ROS 2 Interface Definition Language):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># GraspPlanning.srv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">geometry_msgs/PoseStamped target_pose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string gripper_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bool success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trajectory_msgs/JointTrajectory planned_trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float32 execution_time_sec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string error_message</span><br></span></code></pre></div></div>
<p>A client calls this service like:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grasp_client.call_async(GraspPlanning.Request(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    target_pose=pose_stamped,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gripper_type=&quot;parallel_gripper&quot;))</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-use-services-vs-topics">When to Use Services vs. Topics<a href="#when-to-use-services-vs-topics" class="hash-link" aria-label="Direct link to When to Use Services vs. Topics" title="Direct link to When to Use Services vs. Topics" translate="no">​</a></h3>
<table><thead><tr><th>Scenario</th><th>Use Service</th><th>Use Topic</th><th>Reason</th></tr></thead><tbody><tr><td>Stream camera frames at 30 Hz</td><td>❌</td><td>✅</td><td>Continuous, asynchronous data; latency-tolerant</td></tr><tr><td>Publish joint positions every 10 ms</td><td>❌</td><td>✅</td><td>High-frequency updates; subscribers decide consumption rate</td></tr><tr><td>Request a grasp plan for an object</td><td>✅</td><td>❌</td><td>Synchronous request; client needs answer before proceeding</td></tr><tr><td>Emergency stop signal</td><td>✅ or ✅</td><td>Both work; use service for critical, latency-sensitive commands</td><td></td></tr><tr><td>Log sensor data for analysis</td><td>❌</td><td>✅</td><td>Passive consumption; no response needed</td></tr><tr><td>Check if gripper is gripping</td><td>✅</td><td>❌</td><td>Query current state; expect immediate response</td></tr></tbody></table>
<p><strong>Decision rule</strong>:</p>
<ul>
<li class=""><strong>Use a service if</strong> the caller needs a response before proceeding (request-reply semantics)</li>
<li class=""><strong>Use a topic if</strong> the sender doesn&#x27;t need acknowledgment or if there are multiple subscribers (pub-sub semantics)</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-context-communication-in-humanoid-robots">Practical Context: Communication in Humanoid Robots<a href="#practical-context-communication-in-humanoid-robots" class="hash-link" aria-label="Direct link to Practical Context: Communication in Humanoid Robots" title="Direct link to Practical Context: Communication in Humanoid Robots" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-1-obstacle-detection-pipeline">Example 1: Obstacle Detection Pipeline<a href="#example-1-obstacle-detection-pipeline" class="hash-link" aria-label="Direct link to Example 1: Obstacle Detection Pipeline" title="Direct link to Example 1: Obstacle Detection Pipeline" translate="no">​</a></h3>
<p>A humanoid robot detects obstacles in front of it and adjusts its walking path.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Perception Layer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Camera Publisher → /robot/camera/rgb/image_raw (topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Obstacle Detector Node (subscriber)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Process image, detect obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Publish Obstacles → /robot/perception/obstacles (topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Planning Layer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Path Planner Node (subscriber to /robot/perception/obstacles)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Compute collision-free path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Publish Planned Trajectory → /robot/planning/trajectory (topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action Layer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Motor Controller Node (subscriber to /robot/planning/trajectory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Execute joint commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Publish Joint States → /robot/arm/joint_states (topic)</span><br></span></code></pre></div></div>
<p><strong>Why topics?</strong> All data is continuous, asynchronous, and decoupled. The camera doesn&#x27;t know about obstacles; the planner doesn&#x27;t know about the camera—they&#x27;re independent subsystems.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-2-grasp-command-pipeline">Example 2: Grasp Command Pipeline<a href="#example-2-grasp-command-pipeline" class="hash-link" aria-label="Direct link to Example 2: Grasp Command Pipeline" title="Direct link to Example 2: Grasp Command Pipeline" translate="no">​</a></h3>
<p>A humanoid reaches for an object and grasps it. The grasping command is synchronous—the arm waits for grasp confirmation.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User/AI Agent:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Grasp object at (0.5, 0.2, 1.1)&quot; → Service Call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Grasp Planning Service Server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inverse kinematics calculation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Collision checking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Trajectory generation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Returns: {success: true, trajectory: [...]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Motor Controller subscribes to /robot/arm/planned_trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Executes joint commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publishes /robot/arm/joint_states (continuous feedback)</span><br></span></code></pre></div></div>
<p><strong>Why a service for grasp planning?</strong> The AI agent needs confirmation that the grasp is feasible before committing to the action. If the service returns <code>success: false</code>, the agent can retry with a different pose.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-3-motor-feedback-loop">Example 3: Motor Feedback Loop<a href="#example-3-motor-feedback-loop" class="hash-link" aria-label="Direct link to Example 3: Motor Feedback Loop" title="Direct link to Example 3: Motor Feedback Loop" translate="no">​</a></h3>
<p>A humanoid&#x27;s arm controller continuously receives joint position feedback.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Joint Sensor Publisher:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Publishes every 10 ms → /robot/arm/joint_states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓ (asynchronous)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Subscribers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Safety Monitor (checks if joints are in safe range)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Motor Controller (reads current state for next command)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Data Logger (records for analysis)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  No blocking; all subscribers consume at their own pace</span><br></span></code></pre></div></div>
<p><strong>Why topics?</strong> Continuous feedback stream with multiple independent consumers.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="communication-patterns-in-humanoids">Communication Patterns in Humanoids<a href="#communication-patterns-in-humanoids" class="hash-link" aria-label="Direct link to Communication Patterns in Humanoids" title="Direct link to Communication Patterns in Humanoids" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-1-perception--planning--action">Pattern 1: Perception → Planning → Action<a href="#pattern-1-perception--planning--action" class="hash-link" aria-label="Direct link to Pattern 1: Perception → Planning → Action" title="Direct link to Pattern 1: Perception → Planning → Action" translate="no">​</a></h3>
<p>The classic three-layer architecture for robot control:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    Humanoid Robot System                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  PERCEPTION LAYER:                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────  ─────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Camera Pub  Depth Pub  IMU Pub   Force/Torque Pub   │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │     ↓           ↓         ↓            ↓             │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Obstacle Detector, Object Recognizer, Localization  │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │     ↓                          ↓                     │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Obstacles Topic ─────────→  Object Poses Topic      │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                   ↓                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  PLANNING LAYER:                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Path Planner      Motion Planner     Grasp Planner   │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ (service calls)   (service calls)    (service calls) │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │     ↓                 ↓                  ↓           │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Trajectory Topic ←─ Trajectory Topic ← Trajectory    │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                   ↓                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ACTION LAYER:                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Motor Controllers (subscribes to Trajectory Topic)   │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │     ↓                                                │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Publish Joint Commands ─→ Actuators                 │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Publish Joint Feedback ←─ Joint Sensors             │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Data flow</strong>:</p>
<ol>
<li class="">Sensors publish raw data to topics (camera, IMU, force-torque)</li>
<li class="">Perception nodes subscribe, process, and publish interpreted data (obstacles, objects)</li>
<li class="">Planning nodes subscribe to perception data, call services for feasibility checks, and publish trajectories</li>
<li class="">Action nodes subscribe to trajectories and execute commands</li>
<li class="">Feedback loops: Controllers publish joint states; planners subscribe to verify execution</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-2-multi-agent-coordination">Pattern 2: Multi-Agent Coordination<a href="#pattern-2-multi-agent-coordination" class="hash-link" aria-label="Direct link to Pattern 2: Multi-Agent Coordination" title="Direct link to Pattern 2: Multi-Agent Coordination" translate="no">​</a></h3>
<p>Two robots must coordinate actions without collision:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Robot 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Motion Planner → /shared/robot_1/trajectory (topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              Shared Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Robot 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Motion Planner → /shared/robot_2/trajectory (topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              Shared Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Coordination Service (requests all robot trajectories, checks collisions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    If collision detected → respond with adjusted trajectories</span><br></span></code></pre></div></div>
<p><strong>Pattern</strong>: Each robot publishes its planned trajectory to a shared namespace. A coordination service aggregates all trajectories, checks for collisions, and responds with adjusted plans if conflicts are detected.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pattern-3-hierarchical-control-with-mode-switching">Pattern 3: Hierarchical Control with Mode Switching<a href="#pattern-3-hierarchical-control-with-mode-switching" class="hash-link" aria-label="Direct link to Pattern 3: Hierarchical Control with Mode Switching" title="Direct link to Pattern 3: Hierarchical Control with Mode Switching" translate="no">​</a></h3>
<p>Robot operates in different modes (idle, walking, grasping, manipulating):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User Input / AI Decision</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Mode Selector Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ IDLE → Disable all motion controllers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ WALKING → Activate leg controllers, subscribe to walking target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├─ GRASPING → Activate arm controller, subscribe to grasp target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─ MANIPULATION → Activate arm + gripper, coordinate movement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Current Mode Topic: /robot/mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ↓ (all controllers subscribe)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Controllers adjust behavior based on mode</span><br></span></code></pre></div></div>
<p><strong>Benefit</strong>: Clean separation of concerns. Each controller only responds to its mode, reducing complexity.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="edge-cases-and-synchronization">Edge Cases and Synchronization<a href="#edge-cases-and-synchronization" class="hash-link" aria-label="Direct link to Edge Cases and Synchronization" title="Direct link to Edge Cases and Synchronization" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-1-node-failures-and-recovery">Challenge 1: Node Failures and Recovery<a href="#challenge-1-node-failures-and-recovery" class="hash-link" aria-label="Direct link to Challenge 1: Node Failures and Recovery" title="Direct link to Challenge 1: Node Failures and Recovery" translate="no">​</a></h3>
<p><strong>Scenario</strong>: A perception node crashes. Planning and action nodes are waiting for data.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Perception Node CRASHES ✗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Perception Topic (/robot/perception/obstacles) stops receiving data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Planner timeout → Planning fails → Action blocked</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>:</p>
<ul>
<li class=""><strong>Timeout handling</strong>: Set explicit timeouts on topic subscriptions</li>
<li class=""><strong>Fallback behavior</strong>: If no perception data for 500 ms, use last known state</li>
<li class=""><strong>Health monitoring</strong>: Launch a dedicated monitoring node that checks heartbeats from critical nodes</li>
<li class=""><strong>Graceful degradation</strong>: Continue with conservative assumptions (assume obstacles everywhere)</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Pseudocode for timeout handling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">last_obstacle_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">last_update_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> last_update_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 500 ms timeout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># No data received; use fallback</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apply_conservative_behavior</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Data available; process normally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        plan_with_current_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-2-message-delays-and-out-of-order-delivery">Challenge 2: Message Delays and Out-of-Order Delivery<a href="#challenge-2-message-delays-and-out-of-order-delivery" class="hash-link" aria-label="Direct link to Challenge 2: Message Delays and Out-of-Order Delivery" title="Direct link to Challenge 2: Message Delays and Out-of-Order Delivery" translate="no">​</a></h3>
<p><strong>Scenario</strong>: Two camera images arrive out of order due to network delays. Image B (newer) arrives before Image A (older).</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Time:  0 ms    10 ms    20 ms    30 ms    40 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sent:  Image A ─────→   Image B ─────→</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Recv:  ─────────────→   ←─────────────</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       (Image B arrives first!)</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>:</p>
<ul>
<li class=""><strong>Timestamping</strong>: Every message includes a <code>header.stamp</code> (ROS Time)</li>
<li class=""><strong>Sorting by timestamp</strong>: Process messages in the order of their sensor timestamp, not arrival order</li>
<li class=""><strong>Message synchronization</strong>: Use message_filters to synchronize messages from multiple sensors</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use ROS 2 message_filters to synchronize camera and depth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> message_filters </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ApproximateTimeSynchronizer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sync </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ApproximateTimeSynchronizer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">camera_sub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> depth_sub</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queue_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    slop</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 100 ms tolerance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registerCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">on_image_and_depth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">on_image_and_depth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_msg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> depth_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Both messages are approximately synchronized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    process_stereo_pair</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_msg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> depth_msg</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-3-conflicting-commands-multi-agent-coordination">Challenge 3: Conflicting Commands (Multi-Agent Coordination)<a href="#challenge-3-conflicting-commands-multi-agent-coordination" class="hash-link" aria-label="Direct link to Challenge 3: Conflicting Commands (Multi-Agent Coordination)" title="Direct link to Challenge 3: Conflicting Commands (Multi-Agent Coordination)" translate="no">​</a></h3>
<p><strong>Scenario</strong>: Two planning nodes both issue grasp commands to the same gripper.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Planner 1: &quot;Open gripper&quot;  ──┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              ├─→ Gripper Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Planner 2: &quot;Close gripper&quot; ──┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓ (conflict!)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Which command wins?</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>:</p>
<ul>
<li class=""><strong>Single writer principle</strong>: Only one node can write commands to a topic (the &quot;master controller&quot;)</li>
<li class=""><strong>Service-based arbitration</strong>: Planners call a service; the service enforces mutual exclusion</li>
<li class=""><strong>Command queuing</strong>: Queue commands and execute sequentially, or reject conflicting commands</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Service-based arbitration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GraspArbitrator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handle_grasp_request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gripper_in_use</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">success</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Gripper busy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gripper_in_use </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">issue_grasp_command</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gripper_in_use </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">success</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-4-latency-critical-tasks">Challenge 4: Latency-Critical Tasks<a href="#challenge-4-latency-critical-tasks" class="hash-link" aria-label="Direct link to Challenge 4: Latency-Critical Tasks" title="Direct link to Challenge 4: Latency-Critical Tasks" translate="no">​</a></h3>
<p><strong>Scenario</strong>: Emergency stop signal must reach the motor controller within 50 ms.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Safety Monitor detects obstacle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publish /robot/safety/emergency_stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓ (network delay, queue delay, processing delay)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Motor Controller receives signal (50 ms deadline)</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>:</p>
<ul>
<li class=""><strong>High-priority QoS</strong>: Set reliability=RELIABLE and priority=HIGH</li>
<li class=""><strong>Dedicated channel</strong>: Use a separate, lower-latency topic for critical signals</li>
<li class=""><strong>Redundant communication</strong>: Send emergency stop on both ROS 2 topic and a hardwired interrupt line</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># High-priority emergency stop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qos_policy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reliability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RELIABLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    durability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VOLATILE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    history</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HistoryPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KEEP_LAST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deadline</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Duration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">milliseconds</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emergency_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EmergencyStop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/robot/safety/emergency_stop&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qos_policy</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="challenge-5-bandwidth-constraints">Challenge 5: Bandwidth Constraints<a href="#challenge-5-bandwidth-constraints" class="hash-link" aria-label="Direct link to Challenge 5: Bandwidth Constraints" title="Direct link to Challenge 5: Bandwidth Constraints" translate="no">​</a></h3>
<p><strong>Scenario</strong>: A humanoid is transmitting camera video (30 MB/s) and joint states (1 kB/s) over a 100 Mbps network.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Total bandwidth needed: 30 MB/s + overhead &gt; 100 Mbps available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Network congestion → messages dropped → control instability</span><br></span></code></pre></div></div>
<p><strong>Solution</strong>:</p>
<ul>
<li class=""><strong>Compression</strong>: Compress video with H.264 codec; publish JPEG instead of raw RGB</li>
<li class=""><strong>Frequency adaptation</strong>: Lower publication rate for non-critical data</li>
<li class=""><strong>Lossy QoS</strong>: Use BEST_EFFORT for high-bandwidth data (camera); RELIABLE for critical data (grasp commands)</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Publish compressed video instead of raw frames</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compressed_image_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CompressedImage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/robot/camera/rgb/image_raw/compressed&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    qos_profile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">QoSProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reliability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BEST_EFFORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>ROS 2 communication is built on two fundamental patterns:</p>
<ol>
<li class="">
<p><strong>Topics (Pub-Sub)</strong>: Asynchronous, one-way message distribution. Use for continuous sensor data, decoupled subsystems, and scenarios with multiple subscribers.</p>
</li>
<li class="">
<p><strong>Services (Request-Reply)</strong>: Synchronous, bidirectional communication. Use for queries, synchronous operations, and scenarios where the caller needs a response before proceeding.</p>
</li>
</ol>
<p><strong>Key takeaways</strong>:</p>
<ul>
<li class="">Nodes are independent computational units communicating via topics and services</li>
<li class="">Design your communication topology using the <strong>Perception → Planning → Action</strong> pattern</li>
<li class="">Use Quality-of-Service policies to ensure reliable, low-latency communication for time-critical tasks</li>
<li class="">Handle edge cases (node failures, delays, conflicts) with timeouts, fallback behavior, and arbitration mechanisms</li>
<li class="">Balance bandwidth, latency, and reliability based on your humanoid&#x27;s requirements</li>
</ul>
<p><strong>Next chapter</strong>: Learn how to implement these communication patterns in Python using rclpy.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="review-questions">Review Questions<a href="#review-questions" class="hash-link" aria-label="Direct link to Review Questions" title="Direct link to Review Questions" translate="no">​</a></h2>
<ol>
<li class="">
<p><strong>What is the primary difference between a topic and a service in ROS 2?</strong></p>
</li>
<li class="">
<p><strong>Design a communication topology for a humanoid robot that needs to:</strong></p>
<ul>
<li class=""><strong>Detect obstacles</strong> using a camera and Lidar</li>
<li class=""><strong>Plan a grasp</strong> for an object</li>
<li class=""><strong>Execute the grasp</strong> with the gripper</li>
</ul>
<p>Which nodes would you create? Which would use topics, and which would use services?</p>
</li>
<li class="">
<p><strong>Explain when you would use RELIABLE vs. BEST_EFFORT QoS policies. Give two examples for each.</strong></p>
</li>
<li class="">
<p><strong>A humanoid robot publishes joint states at 100 Hz. Three different nodes subscribe to this data:</strong></p>
<ul>
<li class="">The motion controller (needs updates every 10 ms)</li>
<li class="">The data logger (records for offline analysis)</li>
<li class="">The safety monitor (checks for anomalies every 100 ms)</li>
</ul>
<p><strong>Why is pub-sub the right choice here, not services?</strong></p>
</li>
<li class="">
<p><strong>What is the node lifecycle in ROS 2, and why is it important for robot control?</strong></p>
</li>
<li class="">
<p><strong>Describe a scenario where an emergency stop signal must be delivered in under 50 ms. How would you ensure this latency guarantee?</strong></p>
</li>
<li class="">
<p><strong>Two planning nodes both try to command the same gripper to open and close simultaneously. What communication pattern would you use to resolve this conflict?</strong></p>
</li>
<li class="">
<p><strong>Explain the role of the <code>header.stamp</code> field in ROS 2 messages. Why is it critical for multi-sensor fusion?</strong></p>
</li>
<li class="">
<p><strong>A sensor publishes at 30 Hz, but due to network delays, messages sometimes arrive out of order. How would you ensure your processing code handles this correctly?</strong></p>
</li>
<li class="">
<p><strong>Design a simple Perception → Planning → Action pipeline for a humanoid robot that navigates to and picks up an object. For each component, specify whether it publishes topics, calls services, or both.</strong></p>
</li>
<li class="">
<p><strong>What does &quot;Quality of Service&quot; (QoS) mean in ROS 2? Name three QoS policies and explain their trade-offs.</strong></p>
</li>
<li class="">
<p><strong>A humanoid robot receives a high-bandwidth video stream (30 MB/s) over a 100 Mbps network link. Propose three strategies to stay within bandwidth limits without losing critical functionality.</strong></p>
</li>
<li class="">
<p><strong>Explain why multi-agent robots need a <strong>shared namespace</strong> for their communication topics. Give an example.</strong></p>
</li>
<li class="">
<p><strong>What is the difference between <code>TRANSIENT_LOCAL</code> and <code>VOLATILE</code> durability in QoS? When would you use each?</strong></p>
</li>
<li class="">
<p><strong>A planning node times out waiting for perception data. Design a fallback strategy that allows the robot to continue operating safely.</strong></p>
</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://docs.ros.org/en/humble/Concepts/Basic/About-Nodes.html" target="_blank" rel="noopener noreferrer" class="">ROS 2 Humble Documentation: Nodes</a></li>
<li class=""><a href="https://docs.ros.org/en/humble/Concepts/Basic/About-Topics.html" target="_blank" rel="noopener noreferrer" class="">ROS 2 Humble Documentation: Topics</a></li>
<li class=""><a href="https://docs.ros.org/en/humble/Concepts/Basic/About-Services.html" target="_blank" rel="noopener noreferrer" class="">ROS 2 Humble Documentation: Services</a></li>
<li class=""><a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Quality-of-Service-Settings.html" target="_blank" rel="noopener noreferrer" class="">ROS 2 Quality of Service Policies</a></li>
<li class=""><a href="https://github.com/ros2/common_interfaces" target="_blank" rel="noopener noreferrer" class="">Standard ROS 2 Message Types</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/anthropics/hackathon-book/tree/main/docs/module-1/01-communication.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/hackathon-book/docs/module-1/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 1: Introduction to ROS 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hackathon-book/docs/module-1/python-agents"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 3: Python AI Agents &amp; URDF</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning Objectives</a></li><li><a href="#core-concepts" class="table-of-contents__link toc-highlight">Core Concepts</a><ul><li><a href="#what-is-a-node" class="table-of-contents__link toc-highlight">What is a Node?</a></li><li><a href="#node-namespaces-and-naming" class="table-of-contents__link toc-highlight">Node Namespaces and Naming</a></li><li><a href="#node-lifecycle" class="table-of-contents__link toc-highlight">Node Lifecycle</a></li></ul></li><li><a href="#topics-and-publish-subscribe-pub-sub-communication" class="table-of-contents__link toc-highlight">Topics and Publish-Subscribe (Pub-Sub) Communication</a><ul><li><a href="#what-is-a-topic" class="table-of-contents__link toc-highlight">What is a Topic?</a></li><li><a href="#pub-sub-communication-flow" class="table-of-contents__link toc-highlight">Pub-Sub Communication Flow</a></li><li><a href="#message-types-and-examples" class="table-of-contents__link toc-highlight">Message Types and Examples</a></li><li><a href="#quality-of-service-qos-policies" class="table-of-contents__link toc-highlight">Quality of Service (QoS) Policies</a></li><li><a href="#topic-naming-conventions" class="table-of-contents__link toc-highlight">Topic Naming Conventions</a></li></ul></li><li><a href="#services-and-request-reply-communication" class="table-of-contents__link toc-highlight">Services and Request-Reply Communication</a><ul><li><a href="#what-is-a-service" class="table-of-contents__link toc-highlight">What is a Service?</a></li><li><a href="#service-request-reply-patterns" class="table-of-contents__link toc-highlight">Service Request-Reply Patterns</a></li><li><a href="#service-definition-example" class="table-of-contents__link toc-highlight">Service Definition Example</a></li><li><a href="#when-to-use-services-vs-topics" class="table-of-contents__link toc-highlight">When to Use Services vs. Topics</a></li></ul></li><li><a href="#practical-context-communication-in-humanoid-robots" class="table-of-contents__link toc-highlight">Practical Context: Communication in Humanoid Robots</a><ul><li><a href="#example-1-obstacle-detection-pipeline" class="table-of-contents__link toc-highlight">Example 1: Obstacle Detection Pipeline</a></li><li><a href="#example-2-grasp-command-pipeline" class="table-of-contents__link toc-highlight">Example 2: Grasp Command Pipeline</a></li><li><a href="#example-3-motor-feedback-loop" class="table-of-contents__link toc-highlight">Example 3: Motor Feedback Loop</a></li></ul></li><li><a href="#communication-patterns-in-humanoids" class="table-of-contents__link toc-highlight">Communication Patterns in Humanoids</a><ul><li><a href="#pattern-1-perception--planning--action" class="table-of-contents__link toc-highlight">Pattern 1: Perception → Planning → Action</a></li><li><a href="#pattern-2-multi-agent-coordination" class="table-of-contents__link toc-highlight">Pattern 2: Multi-Agent Coordination</a></li><li><a href="#pattern-3-hierarchical-control-with-mode-switching" class="table-of-contents__link toc-highlight">Pattern 3: Hierarchical Control with Mode Switching</a></li></ul></li><li><a href="#edge-cases-and-synchronization" class="table-of-contents__link toc-highlight">Edge Cases and Synchronization</a><ul><li><a href="#challenge-1-node-failures-and-recovery" class="table-of-contents__link toc-highlight">Challenge 1: Node Failures and Recovery</a></li><li><a href="#challenge-2-message-delays-and-out-of-order-delivery" class="table-of-contents__link toc-highlight">Challenge 2: Message Delays and Out-of-Order Delivery</a></li><li><a href="#challenge-3-conflicting-commands-multi-agent-coordination" class="table-of-contents__link toc-highlight">Challenge 3: Conflicting Commands (Multi-Agent Coordination)</a></li><li><a href="#challenge-4-latency-critical-tasks" class="table-of-contents__link toc-highlight">Challenge 4: Latency-Critical Tasks</a></li><li><a href="#challenge-5-bandwidth-constraints" class="table-of-contents__link toc-highlight">Challenge 5: Bandwidth Constraints</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#review-questions" class="table-of-contents__link toc-highlight">Review Questions</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hackathon-book/docs/intro">Module 1</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.ros.org/en/humble/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS 2 Official Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/anthropics/hackathon-book" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AI-Spec-Driven Book Creation. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>